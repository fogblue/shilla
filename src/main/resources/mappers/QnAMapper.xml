<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="QnAMapper">

	<resultMap id="qna"
		type="iot5.project.shilla.model.QnA">
		<result property="id" column="id" />
		<result property="userId" column="user_id" />
		<result property="ecategory" column="ecategory" />
		<result property="qnaFilePath" column="qna_file_path" />
		<result property="hotelCate" column="hotel_cate" />
		<result property="qnaType" column="qna_type" />
		<result property="subject" column="subject" />
		<result property="content" column="content" />
		<result property="name" column="name" />
		<result property="email" column="email" />
		<result property="tel" column="tel" />
		<result property="regDate" column="reg_date" />
		<result property="editDate" column="edit_date" />
		<result property="MemberId" column="Member_id" />
		<result property="ipAddress" column="ip_address" />
	</resultMap>
	
	 <select id="selectQnACount" parameterType="iot5.project.shilla.model.QnA" resultType="int">
        SELECT count(id) FROM qna WHERE user_id=#{userId}
    </select>
    
     <!-- 글쓰기 -->
	<insert id="writeQna" parameterType="iot5.project.shilla.model.QnA" 
		useGeneratedKeys="true" keyProperty="id">
		INSERT INTO qna (
			ecategory, user_id, qna_file_path, hotel_cate, qna_type, 
			subject, content, name, email, tel, reg_date, edit_date, ip_address
		FROM qna
		) VALUES (
			#{ecategory}, #{userId}, #{qnaFilePath}, #{hotelCate}, #{qnaType}, #{subject},
			#{content}, #{name}, #{email}, #{tel}, now(), now(), #{ipAddress}
		)
	</insert>
	
</mapper>