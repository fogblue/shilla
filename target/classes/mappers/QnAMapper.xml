<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="QnAMapper">

	<resultMap id="qna"
		type="iot5.project.shilla.model.QnA">
		<result property="id" column="id" />
		<result property="user_id" column="user_id" />
		<result property="ecategory" column="ecategory" />
		<result property="qnaFile" column="qna_file" />
		<result property="hotelCate" column="hotel_cate" />
		<result property="qnaType" column="qna_type" />
		<result property="subject" column="subject" />
		<result property="content" column="content" />
		<result property="name" column="name" />
		<result property="email" column="email" />
		<result property="tel" column="tel" />
		<result property="regDate" column="reg_date" />
		<result property="editDate" column="edit_date" />
		<result property="MemberId" column="Member_id" />
	</resultMap>
	
	 <select id="selectQnACount" parameterType="iot5.project.shilla.model.QnA" resultType="int">
        SELECT count(id) FROM qna WHERE user_id=#{userId}
    </select>
    
     <!-- 문서를 저장한다 > 글쓰기 -->
	<insert id="insertQna" parameterType="iot5.project.shilla.model.QnA" 
		useGeneratedKeys="true" keyProperty="id">
		INSERT INTO qna (
			ecategory, qna_file, hotel_cate, qna_type, 
			subject, content, name, email, tel, reg_date, edit_date
		FROM qna
		) VALUES (
			#{ecategory},#{qna_file}, #{hotel_cate}, #{qna_type}, #{subject},
			#{content}, #{name}, #{email}, #{tel}, now(), now()
		)
	</insert>
	
</mapper>