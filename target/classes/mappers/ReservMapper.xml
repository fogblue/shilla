<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ReservMapper">

	<resultMap id="reserv" type="iot5.project.shilla.model.Reservation">
		<result property="id" column="id" />
		<result property="hotelCate" column="hotel_cate" />
		<result property="checkIn" column="check_in" />
		<result property="checkOut" column="check_out" />
		<result property="pplAd" column="ppl_ad" />
		<result property="pplCh" column="ppl_ch" />
		<result property="pplBb" column="ppl_bb" />
		<result property="roomType" column="room_type" />
		<result property="packageType" column="package_type" />
		<result property="resvDate" column="resv_date" />
		<result property="editDate" column="edit_date" />
		<result property="memberId" column="member_id" />
		<result property="exbed" column="exbed" />
		<result property="meal" column="meal" />
		<result property="roomQty" column="room_qty" />
		<result property="text" column="text" />
	</resultMap>
 	
	<!-- 예약 갯수 -->
	 <select id="selectReservationCount" parameterType="iot5.project.shilla.model.Reservation" resultType="int">
        SELECT count(id) FROM reservation WHERE member_id=#{memberId}
    </select>
    
     <!-- 글쓰기 -->
	<insert id="insertReserv" parameterType="iot5.project.shilla.model.Reservation" 
		useGeneratedKeys="true" keyProperty="id">
		INSERT INTO reservation ( hotel_cate, check_in, check_out, ppl_ad, ppl_ch, ppl_bb, room_type,
		package_type, resv_date, edit_date, member_id, exbed, meal, room_qty, text
		) VALUES (
			#{hotelCate}, #{checkIn}, #{checkOut}, #{pplAd}, #{pplCh}, #{pplBb}, #{roomType},
			#{packageType}, now(), now(), #{memberId},  #{exbed}, #{meal}, #{roomQty}, #{text}
		)
	</insert>
	
	<!-- 예약세부사항 -->
	<select id="selectReserv" parameterType="iot5.project.shilla.model.Reservation" resultMap="reserv">
		SELECT id, hotel_cate, check_in, check_out, ppl_ad, ppl_ch, ppl_bb, room_type,
				package_type, resv_date, edit_date, member_id, exbed, meal, room_qty, text
		FROM reservation
    	WHERE member_id=#{memberId}
	</select>
	
	<!-- id로 검색하기 -->
	<select id="selectReservById" parameterType="iot5.project.shilla.model.Reservation" resultMap="reserv">
		SELECT id, hotel_cate, check_in, check_out, ppl_ad, ppl_ch, ppl_bb, room_type,
				package_type, resv_date, edit_date, member_id, exbed, meal, room_qty, text
		FROM reservation
    	WHERE id=#{id}
	</select>
	
	<!-- 검색 -->
	<select id="searchAvailRooms" parameterType="iot5.project.shilla.model.Reservation" resultMap="reserv">
		 
	</select>
	
</mapper>